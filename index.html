<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>As Long As — Time Perspective</title>
    <meta name="description" content="Put time into perspective. Compare historical events by duration and discover surprising connections across history.">
    <meta name="keywords" content="time comparison, historical events, duration calculator, time perspective">
    
    <!-- Open Graph -->
    <meta property="og:title" content="As Long As — Time Perspective">
    <meta property="og:description" content="Put time into perspective. Compare historical events by duration.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gom00n.github.io/as-long-as/">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Source+Serif+4:ital,wght@0,300;0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0a0908;
            --bg-cream: #f5f0e8;
            --accent-gold: #c9a227;
            --accent-rust: #9e4638;
            --text-dark: #1a1a1a;
            --text-muted: #666;
            --border: #2a2a2a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Serif 4', Georgia, serif;
            background: var(--bg-dark);
            color: var(--bg-cream);
            min-height: 100vh;
            line-height: 1.6;
        }

        .noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
            z-index: 1000;
        }

        header {
            padding: 3rem 2rem 2rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 400;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
        }

        .logo span {
            font-style: italic;
            color: var(--accent-gold);
        }

        .tagline {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            color: var(--text-muted);
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.25em;
            color: var(--accent-gold);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        /* Comparison Section */
        .comparison-section {
            margin-bottom: 4rem;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 2rem;
            align-items: center;
        }

        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }

        .period-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.03) 0%, transparent 100%);
            border: 1px solid var(--border);
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .period-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-gold), var(--accent-rust));
        }

        .period-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .date-inputs {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .date-group {
            flex: 1;
            min-width: 120px;
        }

        .date-group label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        input[type="date"], select {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            color: var(--bg-cream);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        input[type="date"]:focus, select:focus {
            outline: none;
            border-color: var(--accent-gold);
            background: rgba(201, 162, 39, 0.1);
        }

        .vs-divider {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-style: italic;
            color: var(--accent-rust);
        }

        /* Result Display */
        .result-display {
            margin-top: 3rem;
            text-align: center;
            padding: 3rem;
            background: linear-gradient(180deg, rgba(201, 162, 39, 0.05) 0%, transparent 100%);
            border: 1px solid var(--border);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .result-display.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .result-number {
            font-family: 'Playfair Display', serif;
            font-size: clamp(4rem, 12vw, 8rem);
            font-weight: 700;
            color: var(--accent-gold);
            line-height: 1;
        }

        .result-unit {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        .result-statement {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-style: italic;
            margin-top: 2rem;
            line-height: 1.5;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Event Matcher Section */
        .matcher-section {
            margin-bottom: 4rem;
        }

        .event-selector {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 1rem;
            align-items: end;
        }

        @media (max-width: 600px) {
            .event-selector {
                grid-template-columns: 1fr;
            }
        }

        .event-dropdown {
            width: 100%;
        }

        .event-dropdown label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .btn {
            padding: 0.85rem 2rem;
            background: var(--accent-gold);
            color: var(--bg-dark);
            border: none;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: var(--bg-cream);
            transform: translateY(-2px);
        }

        /* Match Result */
        .match-result {
            margin-top: 3rem;
            display: none;
        }

        .match-result.visible {
            display: block;
            animation: fadeIn 0.6s ease forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .match-card {
            background: linear-gradient(135deg, rgba(158, 70, 56, 0.1) 0%, transparent 50%);
            border: 1px solid var(--border);
            padding: 3rem;
            position: relative;
        }

        .match-card::after {
            content: '≈';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6rem;
            color: rgba(201, 162, 39, 0.1);
            font-family: 'Playfair Display', serif;
            pointer-events: none;
        }

        .match-headline {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            line-height: 1.3;
            margin-bottom: 2rem;
        }

        .match-headline .highlight {
            color: var(--accent-gold);
            font-style: italic;
        }

        .timeline-visual {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        @media (max-width: 600px) {
            .timeline-visual {
                grid-template-columns: 1fr;
            }
        }

        .timeline-item {
            padding: 1.5rem;
            border-left: 3px solid var(--accent-gold);
        }

        .timeline-item.historical {
            border-left-color: var(--accent-rust);
        }

        .timeline-dates {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-gold);
            margin-bottom: 0.5rem;
        }

        .timeline-item.historical .timeline-dates {
            color: var(--accent-rust);
        }

        .timeline-event {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .timeline-duration {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        /* Popular Events Gallery */
        .gallery-section {
            margin-top: 4rem;
        }

        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }

        .event-card {
            padding: 1.5rem;
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .event-card:hover {
            border-color: var(--accent-gold);
            transform: translateY(-3px);
        }

        .event-card:hover::before {
            opacity: 1;
        }

        .event-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(201, 162, 39, 0.1) 0%, transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .event-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .event-dates {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            position: relative;
        }

        footer {
            text-align: center;
            padding: 3rem 2rem;
            border-top: 1px solid var(--border);
            margin-top: 4rem;
        }

        footer p {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            letter-spacing: 0.1em;
        }

        footer a {
            color: var(--accent-gold);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-gold);
        }
    </style>
</head>
<body>
    <div class="noise"></div>
    
    <header>
        <h1 class="logo">As <span>Long</span> As</h1>
        <p class="tagline">Putting time into perspective</p>
    </header>

    <main>
        <!-- Event Matcher -->
        <section class="matcher-section">
            <h2 class="section-title">Find a Historical Match</h2>
            
            <div class="event-selector">
                <div class="event-dropdown">
                    <label>Select an ongoing or recent event</label>
                    <select id="event-select">
                        <option value="">Choose an event...</option>
                        <optgroup label="Ongoing">
                            <option value="ukraine-war">Russia-Ukraine War (2022–present)</option>
                            <option value="trump-2">Trump's Second Presidency (2025–present)</option>
                            <option value="chatgpt">ChatGPT era (2022–present)</option>
                            <option value="iphone">Since iPhone Release (2007)</option>
                            <option value="9-11">Since September 11 (2001)</option>
                            <option value="ussr-fall">Since USSR Collapse (1991)</option>
                            <option value="berlin-wall">Since Berlin Wall Fall (1989)</option>
                        </optgroup>
                        <optgroup label="Recent Events">
                            <option value="trump-1">Trump's First Presidency (2017–2021)</option>
                            <option value="covid">COVID-19 Pandemic (2020–2023)</option>
                            <option value="covid-lockdowns">COVID Lockdowns (2020–2021)</option>
                            <option value="brexit">Brexit Process (2016–2020)</option>
                            <option value="obama">Obama Presidency (2009–2017)</option>
                            <option value="biden">Biden Presidency (2021–2025)</option>
                            <option value="afghanistan">US in Afghanistan (2001–2021)</option>
                            <option value="iraq">Iraq War (2003–2011)</option>
                            <option value="syrian-war">Syrian Civil War (2011–2024)</option>
                            <option value="gwbush">George W. Bush Presidency (2001–2009)</option>
                        </optgroup>
                    </select>
                </div>
                <button class="btn" onclick="findMatch()">Find Match</button>
            </div>

            <div class="match-result" id="match-result">
                <div class="match-card">
                    <h3 class="match-headline" id="match-headline">
                        The <span class="highlight" id="selected-event">Ukraine War</span> has now lasted as long as 
                        <span class="highlight" id="matched-event">World War I</span>
                    </h3>
                    
                    <div class="timeline-visual">
                        <div class="timeline-item current">
                            <div class="timeline-dates" id="current-dates">Feb 2022 — Jan 2025</div>
                            <div class="timeline-event" id="current-event">Russia-Ukraine War</div>
                            <div class="timeline-duration" id="current-duration">~1,070 days</div>
                        </div>
                        <div class="timeline-item historical">
                            <div class="timeline-dates" id="historical-dates">Jul 1914 — Nov 1918</div>
                            <div class="timeline-event" id="historical-event">World War I</div>
                            <div class="timeline-duration" id="historical-duration">~1,560 days</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Events Gallery -->
        <section class="gallery-section">
            <h2 class="section-title">Quick Select Events</h2>
            <div class="events-grid" id="events-grid">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Compare Two Periods -->
        <section class="comparison-section">
            <h2 class="section-title">Compare Time Periods</h2>
            
            <div class="comparison-grid">
                <div class="period-card">
                    <div class="period-label">Period A</div>
                    <div class="date-inputs">
                        <div class="date-group">
                            <label>From</label>
                            <input type="date" id="periodA-start">
                        </div>
                        <div class="date-group">
                            <label>To</label>
                            <input type="date" id="periodA-end">
                        </div>
                    </div>
                </div>
                
                <div class="vs-divider">vs</div>
                
                <div class="period-card">
                    <div class="period-label">Period B</div>
                    <div class="date-inputs">
                        <div class="date-group">
                            <label>From</label>
                            <input type="date" id="periodB-start">
                        </div>
                        <div class="date-group">
                            <label>To</label>
                            <input type="date" id="periodB-end">
                        </div>
                    </div>
                </div>
            </div>

            <div class="result-display" id="comparison-result">
                <div class="result-number" id="ratio-number">1.5×</div>
                <div class="result-unit">Ratio</div>
                <p class="result-statement" id="result-statement">
                    Period A is <span id="comparison-text">1.5 times longer</span> than Period B
                </p>
            </div>
        </section>
    </main>

    <footer>
        <p>Time is relative. Perspective is everything.</p>
        <p style="margin-top: 1rem;">
            <a href="https://github.com/gom00n/as-long-as" target="_blank">GitHub</a>
        </p>
    </footer>

    <!-- Load events data -->
    <script src="data/events.js"></script>
    
    <!-- Main application logic -->
    <script>
        // =================================================================
        // UTILITY FUNCTIONS
        // =================================================================

        /**
         * Calculate the number of days between two dates
         */
        function daysBetween(date1, date2) {
            const d1 = new Date(date1);
            const d2 = new Date(date2);
            return Math.abs(Math.floor((d2 - d1) / (1000 * 60 * 60 * 24)));
        }

        /**
         * Format a date string for display (e.g., "Jan 2022")
         */
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
        }

        /**
         * Format a duration in days to a human-readable string
         */
        function formatDuration(days) {
            if (days < 30) return `${days} days`;
            if (days < 365) return `~${Math.round(days / 30)} months`;
            const years = days / 365;
            if (years < 2) return `~${Math.round(days / 30)} months`;
            return `~${years.toFixed(1)} years`;
        }

        // =================================================================
        // CORE MATCHING LOGIC
        // =================================================================

        /**
         * Find the closest matching historical event by duration
         * Excludes events with similar names to avoid self-matching
         */
        function findClosestMatch(targetDays, excludeName) {
            let closest = null;
            let closestDiff = Infinity;

            historicalEvents.forEach(event => {
                // Skip if this event name is similar to the one we're matching
                if (excludeName && (
                    event.name.toLowerCase().includes(excludeName.toLowerCase()) ||
                    excludeName.toLowerCase().includes(event.name.toLowerCase())
                )) {
                    return;
                }
                
                const eventDays = daysBetween(event.start, event.end);
                const diff = Math.abs(eventDays - targetDays);
                if (diff < closestDiff) {
                    closestDiff = diff;
                    closest = { ...event, days: eventDays };
                }
            });

            return closest;
        }

        // =================================================================
        // UI FUNCTIONS
        // =================================================================

        /**
         * Compare two user-defined periods
         */
        function comparePeriods() {
            const aStart = document.getElementById('periodA-start').value;
            const aEnd = document.getElementById('periodA-end').value;
            const bStart = document.getElementById('periodB-start').value;
            const bEnd = document.getElementById('periodB-end').value;

            if (!aStart || !aEnd || !bStart || !bEnd) return;

            const daysA = daysBetween(aStart, aEnd);
            const daysB = daysBetween(bStart, bEnd);

            if (daysB === 0) return;

            const ratio = daysA / daysB;
            const resultDiv = document.getElementById('comparison-result');
            
            document.getElementById('ratio-number').textContent = ratio.toFixed(2) + '×';
            
            let compText;
            if (ratio > 1) {
                compText = `Period A is ${ratio.toFixed(2)} times longer than Period B (${formatDuration(daysA)} vs ${formatDuration(daysB)})`;
            } else if (ratio < 1) {
                compText = `Period A is ${(1/ratio).toFixed(2)} times shorter than Period B (${formatDuration(daysA)} vs ${formatDuration(daysB)})`;
            } else {
                compText = `Both periods are equal in length (${formatDuration(daysA)})`;
            }
            
            document.getElementById('comparison-text').textContent = compText;
            resultDiv.classList.add('visible');
        }

        /**
         * Find a historical match for the selected current event
         */
        function findMatch() {
            const select = document.getElementById('event-select');
            const eventKey = select.value;
            
            if (!eventKey) return;

            const event = currentEvents[eventKey];
            const eventDays = daysBetween(event.start, event.end);
            const match = findClosestMatch(eventDays, event.name);

            // Update display
            document.getElementById('selected-event').textContent = event.name;
            document.getElementById('matched-event').textContent = match.name;
            
            document.getElementById('current-dates').textContent = 
                `${formatDate(event.start)} — ${event.ongoing ? 'Present' : formatDate(event.end)}`;
            document.getElementById('current-event').textContent = event.name;
            document.getElementById('current-duration').textContent = `~${eventDays.toLocaleString()} days`;

            document.getElementById('historical-dates').textContent = 
                `${formatDate(match.start)} — ${formatDate(match.end)}`;
            document.getElementById('historical-event').textContent = match.name;
            document.getElementById('historical-duration').textContent = `~${match.days.toLocaleString()} days`;

            document.getElementById('match-result').classList.add('visible');
        }

        /**
         * Populate the quick-select events gallery
         */
        function populateGallery() {
            const grid = document.getElementById('events-grid');

            galleryEvents.forEach(event => {
                const card = document.createElement('div');
                card.className = 'event-card';
                card.innerHTML = `
                    <div class="event-name">${event.name}</div>
                    <div class="event-dates">${formatDate(event.start)} — ${formatDate(event.end)} · ${formatDuration(daysBetween(event.start, event.end))}</div>
                `;
                card.onclick = () => {
                    document.getElementById('periodA-start').value = event.start;
                    document.getElementById('periodA-end').value = event.end;
                    comparePeriods();
                    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
                };
                grid.appendChild(card);
            });
        }

        // =================================================================
        // INITIALIZATION
        // =================================================================

        // Set up event listeners
        document.getElementById('periodA-start').addEventListener('change', comparePeriods);
        document.getElementById('periodA-end').addEventListener('change', comparePeriods);
        document.getElementById('periodB-start').addEventListener('change', comparePeriods);
        document.getElementById('periodB-end').addEventListener('change', comparePeriods);

        // Initialize on page load
        window.onload = () => {
            populateGallery();
            
            // Set default comparison: iPhone release to now vs Moon landing to Glasnost
            document.getElementById('periodA-start').value = '2007-06-29';
            document.getElementById('periodA-end').value = new Date().toISOString().split('T')[0];
            document.getElementById('periodB-start').value = '1969-07-20';
            document.getElementById('periodB-end').value = '1985-03-11';
            
            comparePeriods();
        };
    </script>
</body>
</html>
